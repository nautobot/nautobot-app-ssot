flowchart TD
    A[Sync Process Start] --> B[Load Production Data]
    B --> C[Load VeritasBot Data]
    C --> D[Calculate Differences]
    D --> E{Object Exists<br/>in VeritasBot?}
    
    E -->|No| F[Create New Object]
    F --> G[Preserve Production UUID]
    G --> H[Add SSoT Tag]
    
    E -->|Yes| I{Has Discovered<br/>Data?}
    I -->|No| J[Safe to Update]
    J --> K[Update Non-Key Fields]
    K --> L[Preserve Relationships]
    
    I -->|Yes| M{Field Type?}
    M -->|Location/Physical| N[Skip Update - Discovery Wins]
    M -->|Metadata/Documentation| O[Update Allowed]
    M -->|Relationships| P{Relationship Type?}
    
    P -->|Device Assignment| Q[Skip - Discovery Wins]
    P -->|Tenant/Contact| R[Update Allowed]
    
    N --> S[Log Conflict]
    Q --> S
    O --> T[Apply Update]
    R --> T
    
    S --> U[Continue to Next Object]
    T --> U
    H --> U
    L --> U
    
    U --> V{More Objects?}
    V -->|Yes| D
    V -->|No| W[Sync Complete]
    
    style N fill:#ff9999
    style Q fill:#ff9999
    style S fill:#ffcc99
    style F fill:#99ff99
    style T fill:#99ccff

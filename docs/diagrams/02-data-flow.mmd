sequenceDiagram
    participant P as Production Nautobot
    participant PA as Production Adapter
    participant DE as DiffSync Engine
    participant VA as VeritasBot Adapter
    participant V as VeritasBot DB
    participant D as Discovery Jobs
    
    Note over P,V: Phase 1: Load Production Data
    PA->>P: GET /api/dcim/locations/
    P-->>PA: Location objects
    PA->>P: GET /api/tenancy/tenants/
    P-->>PA: Tenant objects
    PA->>P: GET /api/extras/contacts/
    P-->>PA: Contact objects
    
    Note over P,V: Phase 2: Load VeritasBot Data
    VA->>V: SELECT * FROM dcim_location
    V-->>VA: Existing locations
    VA->>V: SELECT * FROM tenancy_tenant
    V-->>VA: Existing tenants
    
    Note over P,V: Phase 3: Calculate Differences
    DE->>DE: Compare Production vs VeritasBot
    DE->>DE: Identify Creates/Updates/Deletes
    
    Note over P,V: Phase 4: Apply Changes
    alt Create new objects
        DE->>VA: create(Location, {...})
        VA->>V: INSERT INTO dcim_location
    else Update existing
        DE->>VA: update(Location, {...})
        VA->>V: UPDATE dcim_location SET ...
    else Skip discovered objects
        DE->>DE: Skip - device assigned
    end
    
    Note over P,V: Phase 5: Discovery Jobs Run
    D->>V: INSERT discovered devices
    D->>V: UPDATE device locations (override)
    D->>V: INSERT discovered services
